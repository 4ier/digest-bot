**产品名称：** 长话短说Bot（Feishu Digest Bot）

---

### 1. 产品定位

**作为一个团队协作的飞书用户，**

我希望能够将团队群聊中分享的各种文章、视频等内容自动收集和总结，

并在每天晚上 8 点收到一条 AI 自动生成的日报摘要，

从而让我快速了解团队今天分享的重要信息，节省信息筛选的时间。

---

### 2. 核心功能

#### 2.1 链接收集
- 自动识别群聊中的链接消息
- 支持主流平台：微信文章、知乎、B站视频等
- 自动过滤无效链接和重复内容

#### 2.2 内容处理
- 使用 GPT 生成内容摘要
- 提取关键信息和核心观点
- 按内容类型简单分类（工作相关/其他）

#### 2.3 日报生成
- 每天晚上 8 点自动生成日报
- 以 Markdown 格式在群内推送
- 自动保存到飞书文档

---

### 3. 技术方案

#### 3.1 系统架构
```
digest-bot/
├── bot/                    # 飞书机器人入口
│   ├── listener.js        # 群消息监听
│   └── message.js         # 消息处理
├── parser/                # 内容解析
│   ├── link_extractor.js  # 链接提取
│   └── content_parser.js  # 内容解析
├── summarizer/           # 摘要生成
│   ├── gpt_client.js     # GPT API 调用
│   └── template.js       # 摘要模板
└── config/               # 配置文件
    └── config.js         # 基础配置
```

#### 3.2 数据流程
```
[飞书群消息] → [链接识别] → [内容解析] → [GPT摘要] → [日报生成] → [群内推送]
```

#### 3.3 技术选型
- 后端：Node.js
- 数据库：MongoDB（存储链接和摘要）
- AI：OpenAI GPT API
- 部署：Docker + 云服务器

---

### 4. 使用流程

1. **配置阶段**
   - 将机器人添加到目标飞书群
   - 配置日报推送时间（默认晚上8点）

2. **日常使用**
   - 团队成员在群内分享链接
   - 机器人自动识别并记录
   - 每天定时生成并推送日报

3. **查看日报**
   - 在群内查看 Markdown 格式日报
   - 点击链接查看完整内容
   - 在飞书文档中查看历史记录

---

### 5. 后续规划

#### 5.1 功能迭代
- 支持更多内容平台
- 添加内容分类标签
- 支持自定义摘要模板

#### 5.2 运营指标
- 链接识别准确率
- 摘要生成质量
- 用户使用频率

---

### 6. 注意事项

- 需要飞书管理员授权
- 需要 OpenAI API 密钥
- 建议使用私有部署
- 注意内容版权问题

---

### 7. 应用发布

#### 7.1 发布方式
- 选择"第三方应用"发布方式
- 完成飞书开发者认证
- 提交应用审核

#### 7.2 开发者要求
- 完成企业认证
- 提供应用隐私政策
- 提供应用使用说明
- 提供技术支持方式

#### 7.3 应用配置
- 配置应用权限范围
  - 群消息与群组
  - 文档读写
  - 用户信息
- 配置安全域名
- 配置回调地址

#### 7.4 使用流程
1. 用户从飞书应用市场安装应用
2. 授权应用所需权限
3. 将机器人添加到目标群
4. 开始使用

#### 7.5 运营支持
- 提供应用使用文档
- 建立用户反馈渠道
- 提供基础技术支持
- 定期更新维护

---

### 8. 技术架构更新

#### 8.1 多租户支持
- 使用租户ID区分不同企业
- 独立存储各企业数据
- 支持企业级配置

#### 8.2 安全考虑
- 数据隔离存储
- 访问权限控制
- 敏感信息加密
- 定期数据备份

#### 8.3 部署方案
- 使用云服务器部署
- 配置负载均衡
- 设置监控告警
- 准备灾备方案
